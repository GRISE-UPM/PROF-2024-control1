plugins {
    id 'java'
    id 'jacoco'
}

def mockitoVersion = '5.7.0'
def jUnitPlatformVersion = '5.10.0'
def jacocoVersion = '0.8.12'

repositories {mavenCentral()}

dependencies {
    testImplementation "org.junit.jupiter:junit-jupiter-engine:${jUnitPlatformVersion}"
    testImplementation "org.junit.jupiter:junit-jupiter-api:${jUnitPlatformVersion}"
    testImplementation "org.mockito:mockito-core:${mockitoVersion}" // es esto
}

java {toolchain {languageVersion = JavaLanguageVersion.of(17)}}

tasks.named('test') {
    useJUnit()
    finalizedBy jacocoTestReport 
}

jacoco {toolVersion = "${jacocoVersion}"}

jacocoTestCoverageVerification {
    violationRules {rule {limit {minimum = 1.00}}}
}


check.dependsOn jacocoTestCoverageVerification